<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% if page.title %}{{ page.title | escape }} - {% endif %}{{ site.title | escape }}</title>
    <link rel="stylesheet" href="{{ "/assets/css/styles.css" | relative_url }}">
    {% if jekyll.environment == "production" %}
      {% include feed.xml %}
    {% endif %}
  </head>
  <body>
    <header class="site-header">
      <div class="header-inner">
        <div class="header-left">
          <a href="{{ site.baseurl }}/{% if page.lang == 'zh' %}zh/{% endif %}" class="site-title">
            <img src="{{ site.baseurl }}/assets/images/logo.svg" alt="{{ site.title }}" class="site-logo">
            <img src="{{ site.baseurl }}/assets/images/title.svg" alt="{{ site.title }}" class="site-title-svg">
          </a>
        </div>

        <div class="header-center">
          <nav class="site-nav">
            {% if page.lang == "en" %}
              <a class="nav-link {% if page.url == '/' %}active{% endif %}" href="{{ site.baseurl }}/">Home</a>
              <a class="nav-link {% if page.url == '/about-me/' %}active{% endif %}" href="{{ site.baseurl }}/about-me/">About Me</a>
              <a class="nav-link {% if page.url == '/my-services/' %}active{% endif %}" href="{{ site.baseurl }}/my-services/">My Services</a>
            {% else %}
              <a class="nav-link {% if page.url == '/zh/' %}active{% endif %}" href="{{ site.baseurl }}/zh/">首页</a>
              <a class="nav-link {% if page.url == '/zh/about-me/' %}active{% endif %}" href="{{ site.baseurl }}/zh/about-me/">关于我</a>
              <a class="nav-link {% if page.url == '/zh/my-services/' %}active{% endif %}" href="{{ site.baseurl }}/zh/my-services/">我的服务</a>
            {% endif %}
          </nav>
        </div>

        <div class="header-right">
          <div class="search-container">
            <input type="text" id="search-input" placeholder="{{ site.data.ui[page.lang].search_placeholder }}">
            <ul id="search-results"></ul>
          </div>
          
          <div class="lang-switcher">
            {% if page.lang == "en" %}
              <a class="lang-link active" href="{{ site.baseurl }}/">EN</a>
              <span class="lang-separator">|</span>
              <a class="lang-link" href="{{ site.baseurl }}/zh/">中</a>
            {% else %}
              <a class="lang-link" href="{{ site.baseurl }}/">EN</a>
              <span class="lang-separator">|</span>
              <a class="lang-link active" href="{{ site.baseurl }}/zh/">中</a>
            {% endif %}
          </div>
        </div>
      </div>
    </header>

    <main>
      {{ content }}
    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-content">
          © {{ site.time | date: '%Y' }} {{ site.title }}
        </div>
      </div>
    </footer>

    <!-- Simple Jekyll Search -->
    <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
    <script>
      const searchInput = document.getElementById('search-input');
      const searchResults = document.getElementById('search-results');
      
      SimpleJekyllSearch({
        searchInput: searchInput,
        resultsContainer: searchResults,
        json: '{{ site.baseurl }}/search.json',
        searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
        noResultsText: '{{ site.data.ui[page.lang].no_results }}',
        limit: 10,
        fuzzy: false,
        success: function() {
          searchResults.classList.add('visible');
        }
      });

      document.addEventListener('click', function(event) {
        const isClickInside = searchInput.contains(event.target) || searchResults.contains(event.target);
        if (!isClickInside) {
          searchResults.classList.remove('visible');
        }
      });

      searchInput.addEventListener('input', function() {
        if (!this.value) {
          searchResults.classList.remove('visible');
        }
      });

      searchInput.addEventListener('click', function() {
        if (this.value && searchResults.children.length > 0) {
          searchResults.classList.add('visible');
        }
      });
    </script>
  </body>
</html> 